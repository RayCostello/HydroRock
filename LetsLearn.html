<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Hydroponics Learning Posters</title>

  <!-- html2canvas & jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    :root {
      --color-rock-dark: #8B6242;
      --color-water:     #4BB3FD;
      --color-plant:     #63CF6C;
      --color-light:     #FFF9E5; /* light yellow */
      --color-white:     #FFFFFF;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #C8A887, #FFFFFF);
      color: var(--color-rock-dark);
      min-height:100vh;
    }
    /* Header/nav */
    .header {
      display:flex; align-items:center; justify-content:space-between;
      padding:15px 40px; background:var(--color-rock-dark);
      border-bottom:4px solid var(--color-water);
    }
    .logo img { max-height: 75px; }
    .nav { display:flex; gap:20px; }
    .nav a {
      color:white; text-decoration:none; position:relative; padding-bottom:4px;
    }
    .nav a::after {
      content:""; position:absolute; left:0; bottom:0; width:100%; height:2px;
      background:var(--color-water); opacity:0.5;
    }
    .nav a:hover::after { opacity:1; }

    h1 {
      text-align:center; padding:20px 0; font-size:28px;
    }

    /* Controls above poster */
    .controls-container {
      max-width:800px; margin:0 auto 20px; padding:20px;
      background:var(--color-white);
      border:2px solid #C8A887;
      border-radius:8px;
      box-shadow:0 2px 8px rgba(0,0,0,0.1);
    }
    .controls-container h2 {
      text-align:center; margin-bottom:15px;
      color: var(--color-rock-dark);
      border-bottom:2px solid var(--color-water);
      padding-bottom:8px;
    }
    .control-row {
      display:flex; flex-wrap:wrap; align-items:center;
      gap:12px; margin-bottom:12px;
    }
    .control-row label {
      width:140px; font-weight:bold; color:var(--color-rock-dark);
    }
    .control-row select,
    .control-row input {
      flex:1; min-width:120px;
      padding:6px; border:1px solid #C8A887;
      border-radius:4px; font-size:14px;
    }

    /* Main layout: poster + plant */
    .container {
      display:flex; flex-wrap:wrap;
      gap:30px; justify-content:center;
      max-width:1000px; margin:0 auto 40px;
      padding:0 10px;
    }

    /* Poster styling */
    .poster {
      background: var(--color-light);
      border:2px solid var(--color-rock-dark);
      border-radius:8px;
      box-shadow:0 3px 12px rgba(0,0,0,0.2);
      width:100%; max-width:600px;
      aspect-ratio:3/4;
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    /* Semicircular header */
    .poster-header {
      height:80px;
      background: var(--color-water);
      border-bottom-left-radius:50% 100%;
      border-bottom-right-radius:50% 100%;
      display:flex; align-items:center; justify-content:center;
      color:white; font-size:1.5rem;
      flex-shrink:0;
    }

    /* Gallery of images */
    .image-grid {
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:10px;
      padding:10px;
      flex-shrink:0;
    }
    .image-grid img {
      border:1px solid #C8A887;
      border-radius:4px;
      object-fit:cover;
    }

    /* Text content in two columns */
    .text-content {
      padding:10px 20px;
      flex-grow:1;
      column-count:2;
      column-gap:20px;
      color: var(--color-rock-dark);
      font-size: var(--textSize, 16px);
      overflow-y:auto;
    }
    .text-content p { margin-bottom:1em; }

    /* Green footer bar */
    .poster::after {
      content:""; position:absolute; left:0; right:0; bottom:0;
      height:60px; background:var(--color-plant);
    }

    /* Mark as Studied button */
    .poster button {
      position:absolute; bottom:20px; left:50%;
      transform:translateX(-50%);
      z-index:2;
      background:var(--color-plant);
      color:white;
      border:none;
      padding:8px 16px;
      border-radius:4px;
      cursor:pointer;
      font-weight:bold;
    }

    /* Plant-progress sidebar */
    .plant-growth {
      width:150px; height:400px;
      border:2px solid var(--color-rock-dark);
      border-radius:8px;
      background:linear-gradient(to top,#C8A887,#FFFFFF);
      box-shadow:0 3px 12px rgba(0,0,0,0.2);
      position:relative;
    }
    .plant-growth::before {
      content:"Learning Progress";
      position:absolute; top:-28px; width:100%;
      text-align:center; color:var(--color-rock-dark);
    }
    .plant-growth svg { width:100%; height:100%; }

    /* Download button below */
    .download-container {
      text-align:center;
      margin-bottom:40px;
    }
    .download-container button {
      background:var(--color-plant);
      color:white;
      border:none;
      padding:10px 20px;
      border-radius:4px;
      cursor:pointer;
      font-weight:bold;
    }
    .download-container button:hover {
      background:#52bd5a;
    }

    @media(max-width:800px){
      .text-content { column-count:1; }
      .image-grid img {
        width: calc(50% - 20px); /* two per row on narrow screens */
        height: auto;
      }
    }
  </style>
</head>
<body>

    <header class="header">
        <div class="logo">
          <img src="images/HydroRockLogo.png" alt="HydroRock Logo" >
        </div>
        <nav class="nav">
          <a href="index.html">Home</a>
          <a href="videos.html">Videos</a>
          <a href="camTracker.html">Cam_Tracker</a>
          <a href="play.html">Play Simulation</a>
          <a href="buildHydro.html">HydroBuild</a>
        </nav>
      </header>

  <h1>Hydroponics Learning Posters</h1>

  <div class="controls-container">
    <h2>Customize Your Poster</h2>
    <div class="control-row">
      <label for="category">Category:</label>
      <select id="category">
        <option value="types">Types of Hydroponics</option>
        <option value="media">Growing Mediums</option>
        <option value="benefits">Benefits</option>
        <option value="future">Future</option>
        <option value="problems">Common Problems</option>
        <option value="diy">DIY Systems</option>
      </select>
    </div>
    <div class="control-row">
      <label for="numImages"># Images (1–6):</label>
      <input type="number" id="numImages" min="1" max="6" value="2"/>
    </div>
    <div class="control-row">
      <label for="imageSize">Image Size (px):</label>
      <input type="range" id="imageSize" min="60" max="200" value="120"/>
    </div>
    <div class="control-row">
      <label for="textColor">Text Color:</label>
      <input type="color" id="textColor" value="#333333"/>
    </div>
    <div class="control-row">
      <label for="textSize">Text Size (px):</label>
      <input type="range" id="textSize" min="12" max="24" value="16"/>
    </div>
  </div>

  <div class="container">
    <div class="poster" id="poster">
      <div class="poster-header">
        <h2 id="posterTitle">Select options above</h2>
      </div>
      <div class="image-grid" id="gallery"></div>
      <div class="text-content" id="textLayer"></div>
      <button onclick="markAsStudied()">Mark as Studied</button>
    </div>
    <div class="plant-growth">
      <svg viewBox="0 0 50 200" preserveAspectRatio="xMidYMax meet">
        <path id="stem" d="M25,200 L25,200" stroke="var(--color-plant)" stroke-width="4" fill="none"/>
        <path id="leaf1" d="" fill="var(--color-plant)"/>
        <path id="leaf2" d="" fill="var(--color-plant)"/>
      </svg>
    </div>
  </div>

  <div class="download-container">
    <button onclick="downloadPDF()">Download as PDF</button>
  </div>

  <script>
    const topics = {
      types: {
        title: "Hydroponic System Types",
        images: ["images/types%20of%20hydroponics.png","images/types%20of%20hydroponics2.png","images/hydroponic1.jpeg","images/hydroponic2.jpeg"],
        textPoints: [
          "Nutrient Film Technique (NFT): A thin film of nutrient-rich water flows over roots.",
          "Deep Water Culture (DWC): Roots are suspended in oxygenated nutrient solution.",
          "Ebb & Flow: Trays are periodically flooded then drained to aerate roots.",
          "Aeroponics: Roots hang in air and are misted with nutrient solution."
        ]
      },
      media: {
        title: "Growing Mediums",
        images: ["images/media1.jpg","images/media2.jpeg","images/media3.png","images/media4.jpg","images/media5.jpg"],
        textPoints: [
          "Rockwool retains water and aeration.",
          "Perlite is lightweight and drains well.",
          "Clay pellets (LECA) are reusable and hold moisture.",
          "Coco coir is pH-neutral and eco-friendly."
        ]
      },
      benefits: {
        title: "Benefits of Hydroponics",
        images: ["images/benefit.jpeg","images/benefit1.jpeg","images/benefit5.jpg","images/benefits%20of%20hydrosystem.png"],
        textPoints: [
          "Uses up to 90% less water than soil farming.",
          "Grows 30–50% faster with optimized nutrition.",
          "Space-efficient: ideal for vertical or urban farms.",
          "Fewer pests and diseases in soilless systems.",
          "Year-round production regardless of season."
        ]
      },
      future: {
        title: "The Future of Hydroponics",
        images: ["images/future1.jpeg","images/future2.jpeg","images/future3.jpeg"],
        textPoints: [
          "Urban vertical farms bring food production to cities.",
          "IoT and AI optimize nutrients and climate in real-time.",
          "Hydroponics is key for space and extreme-environment crops.",
          "Scalable systems reduce environmental impact."
        ]
      },
      problems: {
        title: "Common Hydroponic Problems",
        images: ["images/requirement1.jpeg","images/requirement2.jpeg","images/requirement5.jpeg"],
        textPoints: [
          "Higher setup cost for pumps, lights, and controllers.",
          "Requires technical know-how for nutrient and pH management.",
          "Dependent on electricity—outages can harm plants.",
          "Waterborne diseases spread quickly in shared reservoirs."
        ]
      },
      diy: {
        title: "DIY Hydroponics",
        images: ["images/DIY.webp"],
        textPoints: [
          "Build a basic DWC system with a bucket and air pump.",
          "Use common materials (PVC, totes, aquarium pumps) affordably.",
          "Mix quality hydroponic nutrients and monitor pH regularly.",
          "Provide adequate light; supplement with grow lights as needed.",
          "Observe and tweak daily for best results."
        ]
      }
    };

    function pickN(arr,n){
      const a=[...arr],r=[];
      for(let i=0;i<n&&a.length;i++){
        r.push(a.splice(Math.floor(Math.random()*a.length),1)[0]);
      }
      return r;
    }

    function renderPoster(){
      const cat = document.getElementById("category").value;
      const data = topics[cat];
      document.getElementById("posterTitle").innerText = data.title;

      // Images
      const gallery = document.getElementById("gallery");
      gallery.innerHTML = "";
      const num   = +document.getElementById("numImages").value;
      const size  = +document.getElementById("imageSize").value;
      pickN(data.images, num).forEach(src=>{
        const img = new Image();
        img.src = src;
        img.style.width = size + "px";
        img.style.height = "auto";
        gallery.appendChild(img);
      });

      // Text
      const layer = document.getElementById("textLayer");
      layer.innerHTML = "";
      const color = document.getElementById("textColor").value;
      const tsize = document.getElementById("textSize").value + "px";
      layer.style.color    = color;
      layer.style.fontSize = tsize;
      data.textPoints.forEach(pt=>{
        const p = document.createElement("p");
        p.innerText = pt;
        layer.appendChild(p);
      });
    }

    let progress = 0;
    function markAsStudied(){
      if(progress>=100) return;
      progress += 20;
      const stem  = document.getElementById("stem");
      const leaf1 = document.getElementById("leaf1");
      const leaf2 = document.getElementById("leaf2");
      const total = 160, h = total*(progress/100), y0 = 200-h;
      stem.setAttribute("d",`M25,200 L25,${y0}`);
      if(progress>=40) leaf1.setAttribute("d",
        `M25,${y0+20} C5,${y0+10} 5,${y0+40} 25,${y0+30}`);
      if(progress>=60) leaf2.setAttribute("d",
        `M25,${y0+40} C45,${y0+30} 45,${y0+60} 25,${y0+50}`);
    }

    function downloadPDF(){
      html2canvas(document.getElementById("poster"),{scale:2})
        .then(canvas=>{
          const img = canvas.toDataURL("image/png");
          const { jsPDF } = window.jspdf;
          const pdf = new jsPDF({
            orientation:"portrait",
            unit:"px",
            format:[canvas.width,canvas.height]
          });
          pdf.addImage(img,"PNG",0,0,canvas.width,canvas.height);
          pdf.save("Poster.pdf");
        });
    }

    window.onload = ()=>{
      ["category","numImages","imageSize","textColor","textSize"]
        .forEach(id=>
          document.getElementById(id)
            .addEventListener("change",renderPoster)
        );
      renderPoster();
    };
  </script>
</body>
</html>
